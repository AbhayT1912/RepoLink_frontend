import { Link } from 'react-router-dom';
import { useUser } from '@clerk/clerk-react';
import { useEffect, useState } from 'react';

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const REPOS = [
  { id: 'react-core', name: 'facebook/react',            lang: 'JavaScript', stars: '220k', files: 1240, analyzed: '2h ago',  status: 'ready'    },
  { id: 'next-js',    name: 'vercel/next.js',            lang: 'TypeScript', stars: '118k', files: 3820, analyzed: '1d ago',  status: 'ready'    },
  { id: 'rust-lang',  name: 'rust-lang/rust',            lang: 'Rust',       stars: '94k',  files: 8900, analyzed: '3d ago',  status: 'ready'    },
  { id: 'tailwind',   name: 'tailwindlabs/tailwindcss',  lang: 'JavaScript', stars: '79k',  files: 340,  analyzed: '5d ago',  status: 'ready'    },
];

const LANG_COLORS = {
  JavaScript: '#fbbf24',
  TypeScript: '#60a5fa',
  Rust:       '#f97316',
  Go:         '#34d399',
  Python:     '#a78bfa',
};

const ACTIVITY = [
  { icon: 'ğŸ”', text: 'Analyzed facebook/react',                time: '2h ago',  color: '#4ade80' },
  { icon: 'ğŸ’¬', text: 'Asked 14 questions on vercel/next.js',   time: '1d ago',  color: '#60a5fa' },
  { icon: 'ğŸ“Š', text: 'Viewed analytics for rust-lang/rust',    time: '3d ago',  color: '#f87171' },
  { icon: 'ğŸ•¸', text: 'Explored call graph for tailwindcss',    time: '5d ago',  color: '#fbbf24' },
];

const STATS = [
  { icon: 'ğŸ“¦', label: 'Repos Analyzed', value: '4',   sub: 'this month',       color: '#4ade80' },
  { icon: 'ğŸ’¬', label: 'AI Questions',   value: '87',  sub: 'across all repos',  color: '#60a5fa' },
  { icon: 'âš¡', label: 'Credits Left',   value: '420', sub: 'of 500 monthly',    color: '#fbbf24' },
  { icon: 'ğŸ•', label: 'Analyses Saved', value: '12',  sub: 'total history',     color: '#a78bfa' },
];

const QUICK_ACTIONS = [
  { to: '/analyze', icon: 'ğŸ”', label: 'Analyze New Repo',  color: '#4ade80' },
  { to: '/profile',  icon: 'ğŸ‘¤', label: 'Edit Profile',      color: '#60a5fa' },
  { to: '/settings', icon: 'âš™',  label: 'Account Settings',  color: '#a78bfa' },
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PIXEL ATOMS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function DiamondOre({ size = 36 }) {
  const [phase, setPhase] = useState(0);
  useEffect(() => { const id = setInterval(() => setPhase(p => (p + 1) % 4), 500); return () => clearInterval(id); }, []);
  const glows = ['drop-shadow(0 0 3px #00d4ff)', 'drop-shadow(0 0 8px #00d4ff)', 'drop-shadow(0 0 5px #00eeff)', 'drop-shadow(0 0 3px #00d4ff)'];
  return (
    <svg width={size} height={size} viewBox="0 0 12 12" style={{ imageRendering: 'pixelated', filter: glows[phase], transition: 'filter 0.4s' }}>
      <rect width="12" height="12" fill="#7a7a7a" />
      <rect x="1" y="1" width="10" height="10" fill="#8a8a8a" />
      <rect x="2" y="2" width="8" height="8" fill="#7a7a7a" />
      <rect x="2" y="3" width="2" height="2" fill="#00d4ff" />
      <rect x="7" y="5" width="3" height="2" fill="#00d4ff" />
      <rect x="4" y="7" width="2" height="2" fill="#00d4ff" />
      <rect x="3" y="3" width="1" height="1" fill="#aaffff" />
    </svg>
  );
}

function Torch({ style = {} }) {
  const [f, setF] = useState(0);
  useEffect(() => { const id = setInterval(() => setF(x => (x + 1) % 3), 110); return () => clearInterval(id); }, []);
  const fc = ['#ff8c00', '#ff5500', '#ffaa00'][f];
  return (
    <div style={{ position: 'relative', width: 12, height: 28, flexShrink: 0, ...style }}>
      <div style={{ position: 'absolute', top: 0, left: 2, width: 8, height: 7, background: fc, boxShadow: `0 0 ${5 + f * 3}px ${fc}`, transition: 'all 0.09s' }} />
      <div style={{ position: 'absolute', top: 6, left: 4, width: 4, height: 14, background: '#8B5E3C' }} />
    </div>
  );
}

function XPOrbs({ count = 8, style = {} }) {
  return (
    <div style={{ display: 'flex', gap: 4, ...style }}>
      {Array.from({ length: count }).map((_, i) => (
        <div key={i} style={{
          width: 8, height: 8, borderRadius: '50%',
          background: '#a3e635', boxShadow: '0 0 5px #a3e635',
          animation: `xpBounce 1.4s ${i * 0.1}s ease-in-out infinite`,
          opacity: 1 - i * 0.09,
        }} />
      ))}
    </div>
  );
}

function SegBar({ value, max = 100, color, segments = 16 }) {
  const filled = Math.round((value / max) * segments);
  return (
    <div style={{ display: 'flex', gap: 2 }}>
      {Array.from({ length: segments }).map((_, i) => (
        <div key={i} style={{
          flex: 1, height: 8,
          background: i < filled ? color : '#0d2a14',
          boxShadow: i < filled ? `0 0 4px ${color}88` : 'none',
        }} />
      ))}
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STAT CARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function McStatCard({ icon, label, value, sub, color }) {
  const [hovered, setHovered] = useState(false);
  return (
    <div
      onMouseOver={() => setHovered(true)}
      onMouseOut={() => setHovered(false)}
      style={{
        background: '#0b1e10',
        border: `3px solid ${hovered ? color : '#1a4528'}`,
        padding: '22px 20px',
        position: 'relative', overflow: 'hidden',
        boxShadow: hovered ? `6px 6px 0 #040d07, 0 0 22px ${color}33` : '4px 4px 0 #040d07',
        transform: hovered ? 'translate(-3px,-3px)' : 'none',
        transition: 'all 0.18s', cursor: 'default',
      }}
    >
      {/* corner pip */}
      <div style={{ position: 'absolute', top: -4, right: -4, width: 14, height: 14, background: color, boxShadow: `0 0 8px ${color}99` }} />
      {/* bg glow */}
      <div style={{ position: 'absolute', inset: 0, background: `linear-gradient(135deg,${color}08 0%,transparent 60%)`, pointerEvents: 'none' }} />

      <div style={{ fontSize: 26, marginBottom: 10 }}>{icon}</div>
      <div style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 20, color, textShadow: `2px 2px 0 #040d07`, marginBottom: 6 }}>
        {value}
      </div>
      <div style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 6, color: '#2d6a3f', letterSpacing: 1, marginBottom: 8 }}>{label}</div>
      <div style={{ fontFamily: "'VT323',monospace", fontSize: 15, color: '#1a4a2e' }}>{sub}</div>

      {/* Mini seg bar */}
      <div style={{ marginTop: 12 }}>
        <SegBar value={parseInt(value) || 50} max={parseInt(value) * 1.3 || 100} color={color} segments={12} />
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   REPO ROW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function RepoRow({ id, name, lang, stars, files, analyzed, status }) {
  const [hovered, setHovered] = useState(false);
  const lc = LANG_COLORS[lang] || '#4ade80';
  const initial = name.split('/')[0][0]?.toUpperCase() ?? '?';
  return (
    <Link to={`/${id}`} style={{ textDecoration: 'none' }}>
      <div
        onMouseOver={() => setHovered(true)}
        onMouseOut={() => setHovered(false)}
        style={{
          background: '#0b1e10',
          border: `3px solid ${hovered ? '#22c55e' : '#1a4528'}`,
          padding: '14px 18px',
          display: 'flex', alignItems: 'center', gap: 14,
          boxShadow: hovered ? '6px 6px 0 #040d07, 0 0 18px rgba(74,222,128,0.15)' : '3px 3px 0 #040d07',
          transform: hovered ? 'translate(-3px,-3px)' : 'none',
          transition: 'all 0.15s', cursor: 'pointer', position: 'relative', overflow: 'hidden',
        }}
      >
        {/* Left accent */}
        <div style={{ position: 'absolute', left: 0, top: 0, bottom: 0, width: 4, background: hovered ? lc : '#1a4528', transition: 'background 0.15s' }} />

        {/* Avatar block */}
        <div style={{
          width: 38, height: 38, flexShrink: 0, marginLeft: 6,
          background: '#020c06', border: `2px solid ${lc}55`,
          display: 'flex', alignItems: 'center', justifyContent: 'center',
          fontFamily: "'Press Start 2P',monospace", fontSize: 13, color: lc,
          boxShadow: `inset -2px -2px 0 rgba(0,0,0,0.5), 0 0 8px ${lc}33`,
        }}>
          {initial}
        </div>

        {/* Name + meta */}
        <div style={{ flex: 1, minWidth: 0 }}>
          <div style={{ fontFamily: "'VT323',monospace", fontSize: 20, color: '#86efac', marginBottom: 4, whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>
            {name}
          </div>
          <div style={{ display: 'flex', gap: 14, alignItems: 'center', flexWrap: 'wrap' }}>
            <span style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 6, color: lc }}>â— {lang}</span>
            <span style={{ fontFamily: "'VT323',monospace", fontSize: 15, color: '#1a4a2e' }}>â­ {stars}</span>
            <span style={{ fontFamily: "'VT323',monospace", fontSize: 15, color: '#1a4a2e' }}>ğŸ—‚ {files.toLocaleString()} files</span>
          </div>
        </div>

        {/* Status + time */}
        <div style={{ textAlign: 'right', flexShrink: 0 }}>
          <div style={{
            display: 'inline-block',
            fontFamily: "'Press Start 2P',monospace", fontSize: 6, color: '#4ade80',
            border: '2px solid #22c55e', padding: '3px 8px',
            background: 'rgba(74,222,128,0.1)', marginBottom: 6,
          }}>
            âœ“ {status}
          </div>
          <div style={{ fontFamily: "'VT323',monospace", fontSize: 15, color: '#1a4a2e' }}>{analyzed}</div>
        </div>

        {/* Arrow */}
        <div style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 10, color: hovered ? '#4ade80' : '#1a4528', transition: 'color 0.15s, transform 0.15s', transform: hovered ? 'translateX(3px)' : 'none' }}>
          â†’
        </div>
      </div>
    </Link>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
export default function Dashboard() {
  const { user } = useUser();
  const firstName = user?.firstName || user?.username || 'Miner';

  return (
    <>
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323:wght@400&display=swap');
        @keyframes xpBounce{0%,100%{transform:translateY(0) scale(1);}50%{transform:translateY(-6px) scale(1.2);}}
        @keyframes mcBlink{0%,100%{opacity:1;}50%{opacity:0;}}
        @keyframes mcFloat{0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);}}
        @keyframes fadeUp{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
        @keyframes neonPulse{0%,100%{text-shadow:3px 3px 0 #040d07,0 0 15px rgba(74,222,128,0.3);}50%{text-shadow:3px 3px 0 #040d07,0 0 35px rgba(74,222,128,0.7);}}
        @keyframes xpPop{0%,100%{transform:scale(1);}50%{transform:scale(1.18);}}
        @keyframes creeperPulse{0%,100%{filter:drop-shadow(0 0 4px #4ade80);}50%{filter:drop-shadow(0 0 14px #4ade80);}}
        @keyframes scanMove{from{transform:translateY(-100%);}to{transform:translateY(8000%);}}
        @keyframes starTwinkle{0%,100%{opacity:1;}50%{opacity:0.1;}}
        @keyframes actIn{from{opacity:0;transform:translateX(-12px);}to{opacity:1;transform:translateX(0);}}

        .pg{position:absolute;inset:0;background-image:linear-gradient(rgba(74,222,128,0.025) 1px,transparent 1px),linear-gradient(90deg,rgba(74,222,128,0.025) 1px,transparent 1px);background-size:36px 36px;pointer-events:none;}
        .scanline{position:absolute;inset:0;overflow:hidden;pointer-events:none;}
        .scanline::after{content:'';position:absolute;left:0;right:0;height:2px;background:rgba(74,222,128,0.04);animation:scanMove 14s linear infinite;}
      `}</style>

      <div style={{ background: '#040d07', minHeight: '100%', position: 'relative', padding: '32px' }}>
        <div className="pg" />
        <div className="scanline" />

        {/* â”€â”€ WELCOME HEADER â”€â”€ */}
        <div style={{
          display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start',
          marginBottom: 36, position: 'relative', zIndex: 2,
          animation: 'fadeUp 0.5s ease both',
        }}>
          <div>
            {/* Section label */}
            <div style={{
              display: 'inline-flex', alignItems: 'center', gap: 8, marginBottom: 12,
              border: '2px solid #22c55e', padding: '4px 14px',
              fontFamily: "'Press Start 2P',monospace", fontSize: 6, color: '#4ade80', letterSpacing: 2,
              background: 'rgba(21,128,61,0.12)', boxShadow: '3px 3px 0 #040d07',
            }}>
              <Torch />
              WORKSPACE
              <Torch />
            </div>

            <h1 style={{
              fontFamily: "'Press Start 2P',monospace",
              fontSize: 'clamp(12px,1.8vw,18px)',
              color: '#4ade80',
              animation: 'neonPulse 3s ease-in-out infinite',
              lineHeight: 1.6, marginBottom: 8,
            }}>
              DASHBOARD
            </h1>
            <p style={{ fontFamily: "'VT323',monospace", fontSize: 20, color: '#2d6a3f' }}>
              Welcome back, <span style={{ color: '#86efac', fontFamily: "'Press Start 2P',monospace", fontSize: 9 }}>{firstName}</span>.
              You have <span style={{ color: '#fbbf24' }}>420</span> credits remaining.
              <span style={{ animation: 'mcBlink 0.9s step-end infinite', color: '#4ade80', marginLeft: 2 }}>â–ˆ</span>
            </p>
          </div>

          {/* Analyze CTA */}
          <Link to="/analyze" style={{
            display: 'inline-flex', alignItems: 'center', gap: 8,
            fontFamily: "'Press Start 2P',monospace", fontSize: 8, letterSpacing: 1,
            padding: '13px 24px', color: '#fff', textDecoration: 'none',
            background: 'linear-gradient(180deg,#16a34a,#15803d)',
            border: '3px solid #22c55e', boxShadow: '5px 5px 0 #052e16',
            transition: 'all 0.1s', position: 'relative', overflow: 'hidden',
            flexShrink: 0,
          }}
            onMouseOver={e => { e.currentTarget.style.transform = 'translate(-2px,-2px)'; e.currentTarget.style.boxShadow = '7px 7px 0 #052e16'; }}
            onMouseOut={e => { e.currentTarget.style.transform = ''; e.currentTarget.style.boxShadow = '5px 5px 0 #052e16'; }}
          >
            <span style={{ position: 'absolute', inset: 0, background: 'linear-gradient(180deg,rgba(255,255,255,0.1) 0%,transparent 50%)', pointerEvents: 'none' }} />
            + Analyze New Repo
          </Link>
        </div>

        {/* â”€â”€ STAT CARDS â”€â”€ */}
        <div style={{
          display: 'grid', gridTemplateColumns: 'repeat(4,1fr)', gap: 18,
          marginBottom: 36, position: 'relative', zIndex: 2,
        }}>
          {STATS.map((s, i) => (
            <div key={i} style={{ animation: `fadeUp 0.5s ${0.05 + i * 0.08}s ease both` }}>
              <McStatCard {...s} />
            </div>
          ))}
        </div>

        {/* â”€â”€ MAIN GRID â”€â”€ */}
        <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: 24, position: 'relative', zIndex: 2 }}>

          {/* â”€â”€ REPOS TABLE â”€â”€ */}
          <div style={{ animation: 'fadeUp 0.5s 0.35s ease both' }}>
            {/* Header */}
            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: 16 }}>
              <div>
                <div style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 7, color: '#22c55e', letterSpacing: 2, marginBottom: 4 }}>
                  â–¸ YOUR REPOSITORIES
                </div>
                <div style={{ fontFamily: "'VT323',monospace", fontSize: 17, color: '#1a4a2e' }}>Recently analyzed codebases</div>
              </div>
              <DiamondOre size={32} />
            </div>

            {/* Repo rows */}
            <div style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>
              {REPOS.map((r, i) => (
                <div key={r.id} style={{ animation: `fadeUp 0.4s ${0.4 + i * 0.07}s ease both` }}>
                  <RepoRow {...r} />
                </div>
              ))}
            </div>

            {/* XP orb row at bottom */}
            <XPOrbs count={10} style={{ marginTop: 18 }} />
          </div>

          {/* â”€â”€ RIGHT COLUMN â”€â”€ */}
          <div style={{ display: 'flex', flexDirection: 'column', gap: 22, animation: 'fadeUp 0.5s 0.4s ease both' }}>

            {/* Activity feed */}
            <div>
              <div style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 7, color: '#22c55e', letterSpacing: 2, marginBottom: 14 }}>
                â–¸ RECENT ACTIVITY
              </div>
              <div style={{ background: '#0b1e10', border: '3px solid #1a4528', overflow: 'hidden', boxShadow: '4px 4px 0 #040d07' }}>
                {ACTIVITY.map(({ icon, text, time, color }, i) => (
                  <div key={i} style={{
                    display: 'flex', gap: 12, alignItems: 'flex-start',
                    padding: '13px 16px',
                    borderBottom: i < ACTIVITY.length - 1 ? '2px solid #0d2a14' : 'none',
                    position: 'relative', overflow: 'hidden',
                    animation: `actIn 0.4s ${0.5 + i * 0.1}s ease both`,
                    transition: 'background 0.15s',
                  }}
                    onMouseOver={e => e.currentTarget.style.background = '#0d2a14'}
                    onMouseOut={e => e.currentTarget.style.background = 'transparent'}
                  >
                    {/* Left color accent */}
                    <div style={{ position: 'absolute', left: 0, top: 0, bottom: 0, width: 3, background: color }} />

                    <div style={{
                      width: 30, height: 30, flexShrink: 0,
                      background: '#020c06', border: `2px solid ${color}44`,
                      display: 'flex', alignItems: 'center', justifyContent: 'center',
                      fontSize: 14, marginLeft: 6,
                    }}>
                      {icon}
                    </div>
                    <div style={{ flex: 1 }}>
                      <div style={{ fontFamily: "'VT323',monospace", fontSize: 17, color: '#2d6a3f', marginBottom: 3, lineHeight: 1.4 }}>{text}</div>
                      <div style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 6, color: '#1a4a2e' }}>{time}</div>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Quick actions */}
            <div>
              <div style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 7, color: '#22c55e', letterSpacing: 2, marginBottom: 14 }}>
                â–¸ QUICK ACTIONS
              </div>
              <div style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>
                {QUICK_ACTIONS.map(({ to, icon, label, color }, i) => (
                  <Link key={to} to={to} style={{ textDecoration: 'none' }}>
                    <div style={{
                      display: 'flex', alignItems: 'center', gap: 12,
                      background: '#0b1e10', border: '3px solid #1a4528',
                      padding: '12px 16px', transition: 'all 0.15s',
                      boxShadow: '3px 3px 0 #040d07', position: 'relative', overflow: 'hidden',
                      animation: `fadeUp 0.4s ${0.55 + i * 0.08}s ease both`,
                    }}
                      onMouseOver={e => { e.currentTarget.style.borderColor = color; e.currentTarget.style.transform = 'translate(-2px,-2px)'; e.currentTarget.style.boxShadow = `5px 5px 0 #040d07, 0 0 14px ${color}33`; }}
                      onMouseOut={e => { e.currentTarget.style.borderColor = '#1a4528'; e.currentTarget.style.transform = ''; e.currentTarget.style.boxShadow = '3px 3px 0 #040d07'; }}
                    >
                      <div style={{
                        width: 30, height: 30, flexShrink: 0,
                        background: '#020c06', border: `2px solid ${color}55`,
                        display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: 14,
                      }}>
                        {icon}
                      </div>
                      <span style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 7, color, letterSpacing: 1 }}>{label}</span>
                      <span style={{ marginLeft: 'auto', fontFamily: "'Press Start 2P',monospace", fontSize: 8, color: '#1a4a2e' }}>â†’</span>
                    </div>
                  </Link>
                ))}
              </div>
            </div>

            {/* Credits card */}
            <div style={{
              background: '#0b1e10', border: '3px solid #1a4528',
              padding: '20px', boxShadow: '4px 4px 0 #040d07', position: 'relative', overflow: 'hidden',
            }}>
              <div style={{ position: 'absolute', top: -4, right: -4, width: 16, height: 16, background: '#fbbf24', boxShadow: '0 0 8px #fbbf2499' }} />
              <div style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 7, color: '#fbbf24', letterSpacing: 1, marginBottom: 14 }}>
                âš¡ CREDITS USAGE
              </div>
              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 8 }}>
                <span style={{ fontFamily: "'VT323',monospace", fontSize: 17, color: '#2d6a3f' }}>Monthly allowance</span>
                <span style={{ fontFamily: "'Press Start 2P',monospace", fontSize: 8, color: '#fbbf24' }}>420 / 500</span>
              </div>
              {/* Segmented credits bar */}
              <SegBar value={420} max={500} color="#fbbf24" segments={20} />
              <div style={{ fontFamily: "'VT323',monospace", fontSize: 15, color: '#1a4a2e', marginTop: 8, textAlign: 'right' }}>
                Resets in 12 days
              </div>
              <Link to="/pricing" style={{
                display: 'block', textAlign: 'center', marginTop: 14,
                fontFamily: "'Press Start 2P',monospace", fontSize: 6, color: '#fbbf24',
                border: '2px solid #fbbf2444', padding: '8px',
                background: 'rgba(251,191,36,0.06)', textDecoration: 'none',
                transition: 'all 0.15s',
              }}
                onMouseOver={e => { e.currentTarget.style.borderColor = '#fbbf24'; e.currentTarget.style.background = 'rgba(251,191,36,0.12)'; }}
                onMouseOut={e => { e.currentTarget.style.borderColor = '#fbbf2444'; e.currentTarget.style.background = 'rgba(251,191,36,0.06)'; }}
              >
                â†‘ Upgrade Plan
              </Link>
            </div>

          </div>
        </div>
      </div>
    </>
  );
}